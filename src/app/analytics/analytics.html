<!-- Sidebar -->
<app-side-bar></app-side-bar>

<!-- Main Analytics Section -->
<section class="analytics">

  <!-- Navbar with User Guide -->
  <nav class="navbar">
    <button class="guide-btn" (click)="openGuide()">ุฏููู ุงูุงุณุชุฎุฏุงู</button>
  </nav>
<!-- Loading State -->
<div *ngIf="isLoading" class="loading-spinner">
  <div class="spinner"></div>
  <p>ุฌุงุฑู ุชุญููู ุงูุชุญูููุงุช...</p>
</div>

<!-- Error Message -->
<div *ngIf="errorMessage" class="error-banner">
  {{ errorMessage }}
</div>

<!-- Refresh Button -->
<button (click)="refreshAnalytics()" class="btn-refresh" [disabled]="isLoading">
  ๐ ุชุญุฏูุซ ุงูุจูุงูุงุช
</button>

<!-- Auto-Refresh Toggle -->
<label class="toggle-switch">
  <input type="checkbox" 
         [(ngModel)]="autoRefreshEnabled" 
         (change)="toggleAutoRefresh()">
  <span>ุชุญุฏูุซ ุชููุงุฆู (ูู 5 ุฏูุงุฆู)</span>
</label>

<!-- Stats Cards with Loading -->
<div class="stats-grid">
  <div *ngFor="let card of statsCards" class="stat-card" [class]="card.color">
    <div class="card-icon">{{ card.icon }}</div>
    <h3>{{ card.title }}</h3>
    
    <div *ngIf="!card.loading">
      <p class="value">{{ card.value }}</p>
      <span class="change" [class.positive]="card.change.includes('+')">
        {{ card.change }}
      </span>
    </div>
    
    <div *ngIf="card.loading" class="skeleton-loader"></div>
  </div>
</div>

<!-- Insights with Icons -->
<div class="insights-section">
  <h2>๐ก ุงูุชููุนุงุช ูุงูุชุญูููุงุช</h2>
  
  <div *ngFor="let insight of insights" 
       class="insight-card" 
       [ngClass]="getInsightClass(insight.type)">
    
    <div class="insight-header">
      <span class="insight-icon">{{ getInsightIcon(insight.type) }}</span>
      <h3>{{ insight.title }}</h3>
      <span class="confidence">{{ insight.confidence }}% ููุซูููุฉ</span>
    </div>
    
    <p>{{ insight.description }}</p>
  </div>
  
  <div *ngIf="insights.length === 0 && !isLoading" class="no-insights">
    ูุง ุชูุฌุฏ ุชุญูููุงุช ูุงููุฉ ุญุชู ุงูุขู. ุฃุถู ุงููุฒูุฏ ูู ุงูุจูุงูุงุช ููุญุตูู ุนูู ุฑุคู ุฐููุฉ!
  </div>
</div>

</section>
