<app-side-bar #sidebarRef (collapsedChange)="onSidebarToggle($event)"></app-side-bar>
<app-ai-chat></app-ai-chat>
<!-- ===== TOP NAV ===== -->
<nav class="top-nav" [class.sidebar-collapsed]="isSidebarCollapsed">
  <div class="nav-content">
    <div class="nav-left">
      <div>
        <div class="nav-page-title">ููุญุฉ ุงูุชุญูู</div>
        <div class="nav-page-sub">ูุฑุญุจุงู ุจุนูุฏุชู โ ุฅููู ููุฎุต ูุดุฑูุนู ุงูููู</div>
      </div>
    </div>
    <div class="nav-right">
      <div class="nav-date-chip">๐ ุงูููู</div>
      <button class="guide-btn" (click)="openGuide()">
        <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
          <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
          <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0"/>
        </svg>
        <span>ุฏููู ุงูุงุณุชุฎุฏุงู</span>
      </button>
      <!-- Mobile menu button โ hidden on desktop -->
      <button class="topnav-hamburger" (click)="openSidebar()" aria-label="ูุชุญ ุงููุงุฆูุฉ">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
          <line x1="3" y1="6" x2="21" y2="6"></line>
          <line x1="3" y1="12" x2="21" y2="12"></line>
          <line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
      </button>
    </div>
  </div>
</nav>

<!-- ===== GUIDE MODAL ===== -->
<div class="modal-overlay" *ngIf="showGuide" (click)="closeGuide()">
  <div class="modal-container guide-modal" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h3>๐ ุฏููู ุงุณุชุฎุฏุงู ููุญุฉ ุงูุชุญูู</h3>
      <button class="close-btn" (click)="closeGuide()">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
          <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8z"/>
        </svg>
      </button>
    </div>
    <div class="modal-body">
      <p class="guide-intro">ููุญุฉ ุงูุชุญูู ูู ูุฑูุฒ ุฅุฏุงุฑุฉ ูุดุฑูุนูุ ุชุนุฑุถ ูู ููุฎุตุงู ุดุงููุงู ุนู ุงูุฃุฏุงุก ูุงูุชูุฏู.</p>
      <div class="guide-features">
        <div class="guide-item">
          <span class="guide-icon">๐</span>
          <div><h4>ูุชุงุจุนุฉ ุงูุชูุฏู ุงูุนุงู</h4><p>ุชุงุจุน ุชูุฏู ูุดุฑูุนู ูููุงูู ุจุดูู ูุจุงุดุฑ</p></div>
        </div>
        <div class="guide-item">
          <span class="guide-icon">โ๏ธ</span>
          <div><h4>ุชูุจููุงุช ุฐููุฉ</h4><p>ุงุญุตู ุนูู ุชูุจููุงุช ููุฑูุฉ ุนูุฏ ูุฌูุฏ ูุดุงูู</p></div>
        </div>
        <div class="guide-item">
          <span class="guide-icon">๐ก</span>
          <div><h4>ุชูุตูุงุช ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู</h4><p>ุงูุชุฑุงุญุงุช ุฐููุฉ ูุชุญุณูู ุฃุฏุงุก ูุดุฑูุนู</p></div>
        </div>
        <div class="guide-item">
          <span class="guide-icon">๐</span>
          <div><h4>ุงุชุฎุงุฐ ูุฑุงุฑุงุช ุฃุณุฑุน</h4><p>ุจูุงูุงุช ูุงุถุญุฉ ุชุณุงุนุฏู ุนูู ุงุชุฎุงุฐ ุงููุฑุงุฑุงุช</p></div>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-primary" (click)="closeGuide()">ูููุชุ ุดูุฑุงู</button>
    </div>
  </div>
</div>

<!-- ===== DASHBOARD MAIN ===== -->
<main class="dashboard-main" [class.sidebar-collapsed]="isSidebarCollapsed">

  <!-- Loading -->
  <div class="loading-overlay" *ngIf="isInitialLoading">
    <div class="loading-spinner">
      <div class="spinner"></div>
      <p>ุฌุงุฑู ุชุญููู ููุญุฉ ุงูุชุญูู...</p>
    </div>
  </div>

  <!-- ===== WELCOME ===== -->
  <section class="welcome-section">
    <div class="welcome-content">
      <div class="welcome-text">
        <h1 class="welcome-title">
          ูุฑุญุจุงู ุจูุ <span class="user-name">{{ userName }}</span> ๐
        </h1>
        <p class="welcome-subtitle">ุฅููู ูุธุฑุฉ ุณุฑูุนุฉ ุนูู ูุดุฑูุนู ุงูููู</p>
      </div>
      
    </div>
  </section>

  <!-- ===== METRICS ===== -->
  <section class="metrics-grid">

    <div class="metric-card revenue" [class.loading]="financeLoading">
      <div class="metric-icon-wrapper">
        <svg class="metric-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
          <path d="M4 10.781c.148 1.667 1.513 2.85 3.591 3.003V15h1.043v-1.216c2.27-.179 3.678-1.438 3.678-3.3 0-1.59-.947-2.51-2.956-3.028l-.722-.187V3.467c1.122.11 1.879.714 2.07 1.616h1.47c-.166-1.6-1.54-2.748-3.54-2.875V1H7.591v1.233c-1.939.23-3.27 1.472-3.27 3.156 0 1.454.966 2.483 2.661 2.917l.61.162v4.031c-1.149-.17-1.94-.8-2.131-1.718zm3.391-3.836c-1.043-.263-1.6-.825-1.6-1.616 0-.944.704-1.641 1.8-1.828v3.495l-.2-.05zm1.591 1.872c1.287.323 1.852.859 1.852 1.769 0 1.097-.826 1.828-2.2 1.939V8.73z"/>
        </svg>
      </div>
      <div class="metric-content">
        <p class="metric-label">ุงูุฅูุฑุงุฏุงุช</p>
        <h3 class="metric-value">{{ formatCurrency(totalRevenue) }}</h3>
        <div class="metric-change positive" *ngIf="revenueChange > 0">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M8 12a.5.5 0 0 0 .5-.5V5.707l2.146 2.147a.5.5 0 0 0 .708-.708l-3-3a.5.5 0 0 0-.708 0l-3 3a.5.5 0 1 0 .708.708L7.5 5.707V11.5a.5.5 0 0 0 .5.5"/></svg>
          <span>+{{ revenueChange }}%</span>
        </div>
      </div>
      <div class="metric-skeleton" *ngIf="financeLoading"></div>
    </div>

    <div class="metric-card expenses" [class.loading]="financeLoading">
      <div class="metric-icon-wrapper">
        <svg class="metric-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
          <path d="M1 3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1zm7 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4"/>
          <path d="M0 5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1zm3 0a2 2 0 0 1-2 2v4a2 2 0 0 1 2 2h10a2 2 0 0 1 2-2V7a2 2 0 0 1-2-2z"/>
        </svg>
      </div>
      <div class="metric-content">
        <p class="metric-label">ุงููุตุฑููุงุช</p>
        <h3 class="metric-value">{{ formatCurrency(totalExpenses) }}</h3>
        <div class="metric-change negative" *ngIf="expensesChange > 0">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M8 4a.5.5 0 0 1 .5.5v5.793l2.146-2.147a.5.5 0 0 1 .708.708l-3 3a.5.5 0 0 1-.708 0l-3-3a.5.5 0 1 1 .708-.708L7.5 10.293V4.5A.5.5 0 0 1 8 4"/></svg>
          <span>+{{ expensesChange }}%</span>
        </div>
      </div>
      <div class="metric-skeleton" *ngIf="financeLoading"></div>
    </div>

    <div class="metric-card profit" [class.loading]="financeLoading">
      <div class="metric-icon-wrapper">
        <svg class="metric-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
          <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8.5 4.5a.5.5 0 0 0-1 0v5.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293z"/>
        </svg>
      </div>
      <div class="metric-content">
        <p class="metric-label">ุงูุฃุฑุจุงุญ</p>
        <h3 class="metric-value" [class.negative]="profit < 0">{{ formatCurrency(profit) }}</h3>
        <p class="metric-subtitle">{{ profitMargin }}% ูุงูุด ุงูุฑุจุญ</p>
      </div>
      <div class="metric-skeleton" *ngIf="financeLoading"></div>
    </div>

    <div class="metric-card tasks" [class.loading]="tasksLoading">
      <div class="metric-icon-wrapper">
        <svg class="metric-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
          <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z"/>
          <path d="M10.97 4.97a.75.75 0 0 1 1.071 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425z"/>
        </svg>
      </div>
      <div class="metric-content">
        <p class="metric-label">ุงูููุงู ุงูููุชููุฉ</p>
        <h3 class="metric-value">{{ completedTasks }}/{{ totalTasks }}</h3>
        <div class="progress-bar-mini">
          <div class="progress-fill" [style.width.%]="tasksProgress"></div>
        </div>
      </div>
      <div class="metric-skeleton" *ngIf="tasksLoading"></div>
    </div>

  </section>

  <!-- ===== CHARTS ===== -->
  <section class="charts-section">

    <!-- Tasks donut -->
    <div class="chart-card">
      <div class="chart-header">
        <div>
          <h3>๐ ุชูุฏู ุงูููุงู</h3>
          <span class="chart-subtitle">{{ totalTasks }} ูููุฉ ุฅุฌูุงูู</span>
        </div>
      </div>
      <div class="chart-container" style="height:220px">
        <canvas #tasksProgressChart></canvas>
      </div>
      <div class="chart-footer">
        <div class="chart-stat">
          <span class="stat-label">ูุณุจุฉ ุงูุฅูุฌุงุฒ</span>
          <span class="stat-value success">{{ tasksProgress }}%</span>
        </div>
      </div>
    </div>

    <!-- Finance bar -->
    <div class="chart-card" width="400px">
      <div class="chart-header">
        <div>
          <h3>๐ฐ ุงูููุฎุต ุงููุงูู</h3>
          <span class="chart-subtitle">ูุฐุง ุงูุดูุฑ</span>
        </div>
      </div>
      <div class="chart-container " style="height:220px" >
        <canvas #miniFinanceChart></canvas>
      </div>
      <div class="chart-footer">
        <div class="chart-stat">
          <span class="stat-label">ูุงูุด ุงูุฑุจุญ</span>
          <span class="stat-value" [class.success]="profitMargin > 0" [class.danger]="profitMargin < 0">{{ profitMargin }}%</span>
        </div>
      </div>
    </div>
    <!-- Weekly activity line -->
    <div class="chart-card full-width">
      <div class="chart-header">
        <div>
          <h3>๐ ูุดุงุท ุงูุฃุณุจูุน</h3>
          <span class="chart-subtitle">ุงูููุงู ุงูููุชููุฉ ุฎูุงู 7 ุฃูุงู</span>
        </div>
      </div>
      <div class="chart-container" style="height:220px">
        <canvas #activityChart></canvas>
      </div>
      <div class="chart-footer">
        <div class="chart-stat">
          <span class="stat-label">ุฅุฌูุงูู ูุฐุง ุงูุฃุณุจูุน</span>
          <span class="stat-value success">{{ completedTasks }} ูููุฉ</span>
        </div>
        <div class="chart-stat">
          <span class="stat-label">ูุชูุณุท ูููู</span>
          <span class="stat-value info">{{ (completedTasks / 7).toFixed(1) }} ูููุฉ</span>
        </div>
      </div>
    </div>
</section>

  

  <!-- ===== CONTENT GRID ===== -->
  <div class="content-grid">

    <!-- LEFT COLUMN -->
    <div class="left-column">

      <!-- Project Progress -->
      <div class="dashboard-card progress-card">
        <div class="card-header">
          <h3 class="card-title">
            <span class="title-icon">๐</span>
            ุชูุฏู ุงููุดุฑูุน
          </h3>
          <span class="progress-percentage">{{ projectProgress }}%</span>
        </div>
        <div class="card-body">
          <div class="circular-progress-container">
            <svg class="circular-progress" viewBox="0 0 200 200">
              <defs>
                <linearGradient id="progressGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                  <stop offset="0%" style="stop-color:#1f9950;stop-opacity:1"/>
                  <stop offset="100%" style="stop-color:#00e676;stop-opacity:1"/>
                </linearGradient>
              </defs>
              <circle class="progress-bg" cx="100" cy="100" r="90"></circle>
              <circle
                class="progress-bar"
                cx="100" cy="100" r="90"
                [style.stroke-dasharray]="565"
                [style.stroke-dashoffset]="565 - (565 * projectProgress / 100)"
              ></circle>
              <text x="100" y="95" class="progress-text-large">{{ projectProgress }}%</text>
              <text x="100" y="115" class="progress-text-small">ููุชูู</text>
            </svg>
          </div>

          <div class="progress-steps">
            <div class="step" *ngFor="let step of progressSteps; let i = index" [class.completed]="step.done">
              <div class="step-icon">
                <svg *ngIf="step.done" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                  <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M6.97 11.03a.75.75 0 0 0 1.08.022l3.992-4.99a.75.75 0 0 0-1.071-1.05L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06z"/>
                </svg>
                <span *ngIf="!step.done">{{ i + 1 }}</span>
              </div>
              <div class="step-content">
                <p class="step-title">{{ step.title }}</p>
                <p class="step-description">{{ step.description }}</p>
              </div>
            </div>
          </div>

          <button class="btn btn-create-project" (click)="createNewProject()" *ngIf="totalProjects === 0">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
              <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"/>
            </svg>
            ุฅูุดุงุก ูุดุฑูุน ุฌุฏูุฏ
          </button>
        </div>
      </div>

      <!-- Upcoming Tasks -->
      <div class="dashboard-card tasks-card">
        <div class="card-header">
          <h3 class="card-title">
            <svg class="title-icon-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
              <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5M1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4z"/>
            </svg>
            ุงูููุงู ุงููุงุฏูุฉ
          </h3>
          <button class="btn-link" routerLink="/tasks-and-team">ุนุฑุถ ุงููู</button>
        </div>
        <div class="card-body">
          <div class="tasks-list" *ngIf="upcomingTasks.length > 0; else noTasks">
            <div class="task-item" *ngFor="let task of upcomingTasks">
              <div class="task-indicator" [class]="task.priority"></div>
              <div class="task-info">
                <h4 class="task-title">{{ task.title }}</h4>
                <div class="task-meta">
                  <span class="task-time" *ngIf="task.dueDate">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                      <path d="M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71z"/>
                      <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16m7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0"/>
                    </svg>
                    {{ formatDate(task.dueDate) }}
                  </span>
                  <span class="task-priority" [class]="task.priority">{{ getPriorityLabel(task.priority) }}</span>
                </div>
              </div>
              <button class="task-check" (click)="completeTask(task.id)">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                  <path d="M10.97 4.97a.75.75 0 0 1 1.071 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425z"/>
                </svg>
              </button>
            </div>
          </div>
          <ng-template #noTasks>
            <div class="empty-state">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z"/>
              </svg>
              <p>ูุง ุชูุฌุฏ ููุงู ูุงุฏูุฉ</p>
              <button class="btn btn-secondary" routerLink="/tasks-and-team">ุฅุถุงูุฉ ูููุฉ</button>
            </div>
          </ng-template>
        </div>
      </div>

    </div><!-- end left-column -->

    <!-- RIGHT COLUMN -->
    <div class="right-column">

      <!-- Quick Actions -->
      <div class="dashboard-card actions-card">
        <div class="card-header">
          <h3 class="card-title"><span class="title-icon">โก</span> ุฅุฌุฑุงุกุงุช ุณุฑูุนุฉ</h3>
        </div>
        <div class="card-body">
          <div class="actions-grid">
            <button class="action-btn marketing" routerLink="/marketing">
              <div class="action-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                  <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
                  <path d="M6.271 5.055a.5.5 0 0 1 .52.038l3.5 2.5a.5.5 0 0 1 0 .814l-3.5 2.5A.5.5 0 0 1 6 10.5v-5a.5.5 0 0 1 .271-.445"/>
                </svg>
              </div>
              <span>ุฎุทุฉ ุชุณููููุฉ</span>
            </button>
            <button class="action-btn finance" routerLink="/financial-overview">
              <div class="action-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                  <path d="M1 3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1zm7 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4"/>
                  <path d="M0 5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1zm3 0a2 2 0 0 1-2 2v4a2 2 0 0 1 2 2h10a2 2 0 0 1 2-2V7a2 2 0 0 1-2-2z"/>
                </svg>
              </div>
              <span>ุณุฌู ูุงูู</span>
            </button>
            <button class="action-btn tasks" routerLink="/tasks-and-team">
              <div class="action-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                  <path d="M7 14s-1 0-1-1 1-4 5-4 5 3 5 4-1 1-1 1zm4-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6m-5.784 6A2.24 2.24 0 0 1 5 13c0-1.355.68-2.75 1.936-3.72A6.3 6.3 0 0 0 5 9c-4 0-5 3-5 4s1 1 1 1zM4.5 8a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5"/>
                </svg>
              </div>
              <span>ุฅุถุงูุฉ ุนุถู</span>
            </button>
            <button class="action-btn community" routerLink="/community">
              <div class="action-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                  <path d="M2.678 11.894a1 1 0 0 1 .287.801 11 11 0 0 1-.398 2c1.395-.323 2.247-.697 2.634-.893a1 1 0 0 1 .71-.074A8 8 0 0 0 8 14c3.996 0 7-2.807 7-6s-3.004-6-7-6-7 2.808-7 6c0 1.468.617 2.83 1.678 3.894m-.493 3.905a22 22 0 0 1-.713.129c-.2.032-.352-.176-.273-.362a10 10 0 0 0 .244-.637l.003-.01c.248-.72.45-1.548.524-2.319C.743 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7-3.582 7-8 7a9 9 0 0 1-2.347-.306c-.52.263-1.639.742-3.468 1.105"/>
                </svg>
              </div>
              <span>ููุดูุฑ ุฌุฏูุฏ</span>
            </button>
          </div>
        </div>
      </div>

      <!-- AI Insights -->
      <div class="dashboard-card insights-card">
        <div class="card-header">
          <h3 class="card-title"><span class="title-icon">๐ค</span> ุชูุตูุงุช ุฐููุฉ</h3>
          <span class="ai-badge">AI</span>
        </div>
        <div class="card-body">
          <div class="insights-list" *ngIf="aiInsights.length > 0; else noInsights">
            <div class="insight-item" *ngFor="let insight of aiInsights" [class]="insight.type">
              <div class="insight-icon">
                <svg *ngIf="insight.type === 'success'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                  <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M6.97 11.03a.75.75 0 0 0 1.08.022l3.992-4.99a.75.75 0 0 0-1.071-1.05L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06z"/>
                </svg>
                <svg *ngIf="insight.type === 'warning'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                  <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5m.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2"/>
                </svg>
                <svg *ngIf="insight.type === 'info'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                  <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
                  <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0"/>
                </svg>
              </div>
              <div class="insight-content">
                <p class="insight-text">{{ insight.message }}</p>
                <button class="insight-action" *ngIf="insight.action" (click)="handleInsightAction(insight.action)">
                  {{ insight.actionLabel }}
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8"/>
                  </svg>
                </button>
              </div>
            </div>
          </div>
          <ng-template #noInsights>
            <div class="empty-state">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                <path d="M5 8a1 1 0 1 1-2 0 1 1 0 0 1 2 0m4 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0m3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2"/>
              </svg>
              <p>ุฌุงุฑู ุชุญููู ุจูุงูุงุชู...</p>
            </div>
          </ng-template>
        </div>
      </div>

      <!-- Recent Activity -->
      <div class="dashboard-card activity-card">
        <div class="card-header">
          <h3 class="card-title"><span class="title-icon">๐</span> ุงููุดุงุท ุงูุฃุฎูุฑ</h3>
        </div>
        <div class="card-body">
          <div class="activity-timeline" *ngIf="recentActivities.length > 0; else noActivity">
            <div class="activity-item" *ngFor="let activity of recentActivities">
              <div class="activity-dot" [class]="activity.type"></div>
              <div class="activity-content">
                <p class="activity-text">{{ activity.message }}</p>
                <span class="activity-time">{{ getRelativeTime(activity.timestamp) }}</span>
              </div>
            </div>
          </div>
          <ng-template #noActivity>
            <div class="empty-state">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                <path d="M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2M8 1.918l-.797.161A4 4 0 0 0 4 6c0 .628-.134 2.197-.459 3.742-.16.767-.376 1.566-.663 2.258h10.244c-.287-.692-.502-1.49-.663-2.258C12.134 8.197 12 6.628 12 6a4 4 0 0 0-3.203-3.92zM14.22 12c.223.447.481.801.78 1H1c.299-.199.557-.553.78-1C2.68 10.2 3 6.88 3 6c0-2.42 1.72-4.44 4.005-4.901a1 1 0 1 1 1.99 0A5 5 0 0 1 13 6c0 .88.32 4.2 1.22 6"/>
              </svg>
              <p>ูุง ุชูุฌุฏ ุฃูุดุทุฉ ุญุฏูุซุฉ</p>
            </div>
          </ng-template>
        </div>
      </div>

    </div><!-- end right-column -->

  </div><!-- end content-grid -->

</main>