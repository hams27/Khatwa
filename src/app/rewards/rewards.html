<app-side-bar></app-side-bar>
<!-- Loading State -->
<div *ngIf="isLoading" class="loading-overlay">
  <div class="spinner"></div>
  <p>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª...</p>
</div>

<!-- Success/Error Messages -->
<div *ngIf="successMessage" class="success-banner">
  {{ successMessage }}
</div>

<div *ngIf="errorMessage" class="error-banner">
  {{ errorMessage }}
</div>

<!-- User Level Card -->
<div class="level-card">
  <div class="level-header">
    <div class="level-icon" [style.background]="getLevelBadgeColor()">
      {{ getLevelIcon() }}
    </div>
    <div class="level-info">
      <h3>{{ levelName }}</h3>
      <p>Ø§Ù„Ù…Ø³ØªÙˆÙ‰ {{ currentLevel }}</p>
    </div>
    <div class="level-points">
      <h2>{{ totalPoints }}</h2>
      <p>Ù†Ù‚Ø·Ø© Ù…ØªØ§Ø­Ø©</p>
    </div>
  </div>
  
  <div class="level-progress-container">
    <div class="level-progress-bar">
      <div class="level-progress-fill" 
           [style.width.%]="levelProgress"></div>
    </div>
    <p class="level-progress-text">
      {{ getLevelProgressDisplay() }} - 
      {{ pointsToNextLevel }} Ù†Ù‚Ø·Ø© Ù„Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ù‚Ø§Ø¯Ù…
    </p>
  </div>
</div>

<!-- Weekly Goals -->
<section class="weekly-goals">
  <h2>ğŸ¯ Ø§Ù„Ø£Ù‡Ø¯Ø§Ù Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠØ©</h2>
  
  <div class="goals-grid">
    <div *ngFor="let goal of weeklyGoals" 
         class="goal-card"
         [class.completed]="goal.completed">
      
      <div class="goal-header">
        <span class="goal-icon">{{ goal.icon }}</span>
        <h3>{{ goal.title }}</h3>
      </div>
      
      <div class="goal-progress">
        <div class="progress-bar">
          <div class="progress-fill" 
               [style.width.%]="getGoalProgress(goal)"></div>
        </div>
        <span class="progress-text">
          {{ getGoalProgressDisplay(goal) }}
        </span>
      </div>
      
      <div class="goal-footer">
        <span class="goal-points">+{{ goal.points }} Ù†Ù‚Ø·Ø©</span>
        <button *ngIf="!goal.completed && goal.progress >= goal.target"
                (click)="completeGoal(goal)"
                class="btn-complete">
          Ø¥ÙƒÙ…Ø§Ù„
        </button>
        <span *ngIf="goal.completed" class="badge-completed">âœ“ Ù…ÙƒØªÙ…Ù„</span>
      </div>
    </div>
  </div>
</section>

<!-- Achievements -->
<section class="achievements-section">
  <h2>ğŸ… Ø¥Ù†Ø¬Ø§Ø²Ø§ØªÙƒ</h2>
  
  <div class="achievements-grid">
    <!-- Unlocked Achievements -->
    <div *ngFor="let achievement of achievements" 
         class="achievement-card unlocked">
      
      <div class="achievement-icon" [ngClass]="achievement.iconBg">
        {{ achievement.icon }}
      </div>
      
      <div class="achievement-info">
        <h3>{{ achievement.title }}</h3>
        <p>{{ achievement.description }}</p>
        <span class="achievement-points">+{{ achievement.points }} Ù†Ù‚Ø·Ø©</span>
        <span class="achievement-time">{{ achievement.timeAgo }}</span>
      </div>
    </div>
    
    <!-- Locked Achievements -->
    <div *ngFor="let achievement of getLockedAchievements()" 
         class="achievement-card locked">
      
      <div class="achievement-icon locked-icon">
        ğŸ”’
      </div>
      
      <div class="achievement-info">
        <h3>{{ achievement.title }}</h3>
        <p>{{ achievement.description }}</p>
        <span class="achievement-points">{{ achievement.points }} Ù†Ù‚Ø·Ø©</span>
      </div>
    </div>
  </div>
</section>

<!-- Milestones -->
<section class="milestones-section">
  <h2>ğŸ–ï¸ Ø§Ù„Ù…Ø¹Ø§Ù„Ù…</h2>
  
  <div class="milestones-list">
    <div *ngFor="let milestone of milestones" class="milestone-card">
      <div class="milestone-icon">{{ milestone.icon }}</div>
      
      <div class="milestone-content">
        <h3>{{ milestone.title }}</h3>
        <p>{{ milestone.description }}</p>
        
        <div class="milestone-progress">
          <div class="progress-bar">
            <div class="progress-fill" 
                 [style.width.%]="getMilestoneProgress(milestone)"></div>
          </div>
          <span class="progress-text">{{ milestone.progress }}%</span>
        </div>
        
        <span class="milestone-points">{{ milestone.points }} Ù†Ù‚Ø·Ø©</span>
      </div>
    </div>
  </div>
</section>

<!-- Rewards Store -->
<section class="rewards-store">
  <h2>ğŸ Ù…ØªØ¬Ø± Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª</h2>
  
  <div class="rewards-grid">
    <div *ngFor="let reward of rewards" 
         class="reward-card"
         [class.available]="canRedeemReward(reward)"
         [class.locked]="!canRedeemReward(reward)">
      
      <div class="reward-icon">{{ reward.icon }}</div>
      
      <div class="reward-info">
        <h3>{{ reward.title }}</h3>
        <p>{{ reward.description }}</p>
      </div>
      
      <div class="reward-footer">
        <span class="reward-cost">{{ reward.points }} Ù†Ù‚Ø·Ø©</span>
        
        <button (click)="redeemReward(reward)"
                [disabled]="!canRedeemReward(reward)"
                class="btn-redeem">
          <span *ngIf="canRedeemReward(reward)">Ø§Ø³ØªØ¨Ø¯Ø§Ù„</span>
          <span *ngIf="!canRedeemReward(reward)">ØºÙŠØ± Ù…ØªØ§Ø­</span>
        </button>
      </div>
    </div>
  </div>
</section>

<!-- Recent Activities -->
<section class="recent-activities" *ngIf="recentActivities.length > 0">
  <h2>ğŸ“œ Ø§Ù„Ù†Ø´Ø§Ø· Ø§Ù„Ø£Ø®ÙŠØ±</h2>
  
  <div class="activities-list">
    <div *ngFor="let activity of recentActivities" class="activity-item">
      <div class="activity-info">
        <p>{{ activity.title }}</p>
        <span class="activity-time">{{ activity.timeAgo }}</span>
      </div>