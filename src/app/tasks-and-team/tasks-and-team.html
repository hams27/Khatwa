<!-- Sidebar -->
<app-side-bar></app-side-bar>

<!-- Main Content -->
<div class="tasks-page">

  <!-- ===============================
       Navbar (Top Bar)
  ================================= -->
  <nav class="navbar">
    <button class="guide-btn" (click)="openGuide()">ุฏููู ุงูุงุณุชุฎุฏุงู</button>
  </nav>

  <!-- User Guide Popup -->
  <div class="guide-overlay" *ngIf="showGuide">
    <div class="guide-modal">

      <!-- Header -->
      <div class="guide-header">
        <h3>ุฏููู ุงุณุชุฎุฏุงู ุงูููุงู ูุงููุฑูู</h3>
        <button class="close-btn" (click)="closeGuide()">โ</button>
      </div>

      <!-- Content -->
      <div class="guide-content">
        <p>
          ุตูุญุฉ ุงูููุงู ูุงููุฑูู ุชุณุงุนุฏู ุนูู ุฅุฏุงุฑุฉ ุงููุฑูู ููุชุงุจุนุฉ ูู ุงูููุงู.
        </p>
        <ul>
          <li>๐ฅ ูุชุงุจุนุฉ ุฃุนุถุงุก ุงููุฑูู ูุนุฏุฏ ุงูููุงู ููู ุนุถู</li>
          <li>๐ ุนุฑุถ ุงูููุงู ุญุณุจ ุงูุญุงูุฉ: ูุงุฆูุฉุ ููุฏ ุงูุชูููุฐุ ุงููุฑุงุฌุนุฉุ ููุชูู</li>
          <li>๐ท๏ธ ุฅุฏุงุฑุฉ ุงูุฃููููุงุช ูุงูุนูุงูุงุช (Tags) ููู ูููุฉ</li>
          <li>โ ุฅุถุงูุฉ ููุงู ุฌุฏูุฏุฉ ุจุณูููุฉ ููู ุนููุฏ</li>
        </ul>
      </div>

      <!-- Footer -->
      <div class="guide-footer">
        <button class="add-btn" (click)="closeGuide()">ูููุช</button>
      </div>

    </div>
  </div>

  <!-- ===============================
       Header Section
  ================================= -->
  <div class="page-header">
    <div>
      <h1>ุงูููุงู ูุงููุฑูู</h1>
      <p>ูุธู ุนููู ููุฒุน ุงูููุงู ุนูู ูุฑููู</p>
    </div>
    <div class="header-actions">
      <button class="btn btn-outline">ุฅุฏุงุฑุฉ ุงููุฑูู</button>
      <button class="btn btn-primary">+ ูููุฉ ุฌุฏูุฏุฉ</button>
    </div>
  </div>

  <!-- ===============================
       Team Section
  ================================= -->
  <section class="team-section">
    <h3>ุฃุนุถุงุก ุงููุฑูู</h3>
    <div class="team-cards">
      <div class="team-card" *ngFor="let member of teamMembers">
        <div class="avatar">{{ member.avatar }}</div>
        <div>
          <div class="name">{{ member.name }}</div>
          <div class="count">{{ member.tasks }} ูููุฉ</div>
        </div>
      </div>
    </div>
  </section>

  <!-- ===============================
       Tasks Board
  ================================= -->
  <section class="tasks-board">

    <!-- ูุงุฆูุฉ ุงูููุงู (To Do) -->
    <div class="board-column neutral">
      <div class="column-header">
        <span>ูุงุฆูุฉ ุงูููุงู</span>
        <span class="counter">{{ todoCount }}</span>
      </div>

      <div class="task-card all" *ngFor="let t of tasks" [hidden]="t.status !== 'todo'">
        <h4>{{ t.title }}</h4>
        <p>{{ t.desc }}</p>
        <div class="tags">
          <span *ngFor="let tag of t.tags">{{ tag }}</span>
        </div>
        <div class="task-footer">
          <div class="left">
            <span>{{ t.user }}</span>
            <span>{{ t.date }}</span>
          </div>
          <span class="badge" [ngClass]="t.priority">{{ t.priority }}</span>
        </div>
      </div>

      <div class="add-card">+ ุฅุถุงูุฉ ูููุฉ</div>
    </div>

    <!-- ููุฏ ุงูุชูููุฐ (In Progress) -->
    <div class="board-column info">
      <div class="column-header">
        <span>ููุฏ ุงูุชูููุฐ</span>
        <span class="counter">{{ inProgressCount }}</span>
      </div>

      <div class="task-card waiting" *ngFor="let t of tasks" [hidden]="t.status !== 'in-progress'">
        <h4>{{ t.title }}</h4>
        <p>{{ t.desc }}</p>
        <div class="tags">
          <span *ngFor="let tag of t.tags">{{ tag }}</span>
        </div>
        <div class="task-footer">
          <div class="left">
            <span>{{ t.user }}</span>
            <span>{{ t.date }}</span>
          </div>
          <span class="badge" [ngClass]="t.priority">{{ t.priority }}</span>
        </div>
      </div>

      <div class="add-card">+ ุฅุถุงูุฉ ูููุฉ</div>
    </div>

    <!-- ุงููุฑุงุฌุนุฉ (Review) -->
    <div class="board-column warning">
      <div class="column-header">
        <span>ุงููุฑุงุฌุนุฉ</span>
        <span class="counter">{{ reviewCount }}</span>
      </div>

      <div class="task-card preview" *ngFor="let t of tasks" [hidden]="t.status !== 'review'">
        <h4>{{ t.title }}</h4>
        <p>{{ t.desc }}</p>
        <div class="tags">
          <span *ngFor="let tag of t.tags">{{ tag }}</span>
        </div>
        <div class="task-footer">
          <div class="left">
            <span>{{ t.user }}</span>
            <span>{{ t.date }}</span>
          </div>
          <span class="badge" [ngClass]="t.priority">{{ t.priority }}</span>
        </div>
      </div>

      <div class="add-card">+ ุฅุถุงูุฉ ูููุฉ</div>
    </div>

    <!-- ููุชูู (Completed) -->
    <div class="board-column success">
      <div class="column-header">
        <span>ููุชูู</span>
        <span class="counter">{{ completedCount }}</span>
      </div>

      <div class="task-card done" *ngFor="let t of tasks" [hidden]="t.status !== 'completed'">
        <h4>{{ t.title }}</h4>
        <p>{{ t.desc }}</p>
        <div class="tags">
          <span *ngFor="let tag of t.tags">{{ tag }}</span>
        </div>
        <div class="task-footer">
          <div class="left">
            <span>{{ t.user }}</span>
            <span>{{ t.date }}</span>
          </div>
          <span class="badge" [ngClass]="t.priority">{{ t.priority }}</span>
        </div>
      </div>

      <div class="add-card">+ ุฅุถุงูุฉ ูููุฉ</div>
    </div>

  </section>

  <!-- ===============================
       Stats Section
  ================================= -->
  <section class="stats">
    <div class="stat-card">
      <span>ุฅุฌูุงูู ุงูููุงู</span>
      <strong>{{ tasks.length }}</strong>
    </div>
    <div class="stat-card">
      <span>ุงูููุงู ุงูููุชููุฉ</span>
      <strong class="success">{{ completedCount }}</strong>
    </div>
    <div class="stat-card">
      <span>ุงูููุงู ุงููุชุฃุฎุฑุฉ</span>
      <strong class="danger">{{ reviewCount }}</strong>
    </div>
  </section>

</div>
